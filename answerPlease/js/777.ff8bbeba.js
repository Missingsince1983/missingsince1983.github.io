"use strict";(globalThis["webpackChunkanswerplease"]=globalThis["webpackChunkanswerplease"]||[]).push([[777],{4777:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var i=n(3673);function l(e,t,n,l,o,u){const a=(0,i.up)("game-betting-module"),s=(0,i.up)("screen");return(0,i.wg)(),(0,i.j4)(s,null,{default:(0,i.w5)((()=>[(0,i.Wm)(a)])),_:1})}var o=n(7731);const u={class:"game-betting-module"};function a(e,t,n,l,o,a){var s;const d=(0,i.up)("block-title"),v=(0,i.up)("block-subtitle"),r=(0,i.up)("screen-section"),c=(0,i.up)("form-button");return(0,i.wg)(),(0,i.iD)("div",u,[(0,i.Wm)(d,{text:`Ожидаются вопросы из категории: ${null===(s=e.SelectedCategory)||void 0===s?void 0:s.title}`},null,8,["text"]),(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,{text:"Время делать ставки"}),(0,i.Wm)(v,{text:e.descriptionText},null,8,["text"])])),_:1}),e.isFinishedBettings?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{text:"Да","click-handler":e.votePros},null,8,["click-handler"])])),_:1}),(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{text:"Нет","click-handler":e.voteCons,"is-secondary":!0},null,8,["click-handler"])])),_:1})],64)),(0,i.Wm)(r,{"is-bottom-section":!0},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{text:"Далее","click-handler":e.startGameQuestions,"is-disabled":!e.isFinishedBettings,"is-secondary":!0},null,8,["click-handler","is-disabled"])])),_:1})])}var s=n(7666),d=n(9715),v=n(8631),r=n(1959),c=n(9582),m=function(e,t,n,i){function l(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function u(e){try{s(i.next(e))}catch(t){o(t)}}function a(e){try{s(i["throw"](e))}catch(t){o(t)}}function s(e){e.done?n(e.value):l(e.value).then(u,a)}s((i=i.apply(e,t||[])).next())}))};const p=()=>{const e=(0,v.useStore)(),t=(0,c.tv)(),n=()=>m(void 0,void 0,void 0,(function*(){yield t.push(d.Q.GAME_BETTING)})),l=(0,r.iH)(null),o=(0,r.iH)(null),u=(0,r.iH)(0),a=(0,r.iH)(!1),s=()=>m(void 0,void 0,void 0,(function*(){yield g("Y")})),p=()=>m(void 0,void 0,void 0,(function*(){yield g("F")})),g=e=>m(void 0,void 0,void 0,(function*(){var t,n;l.value&&o.value&&(yield h({playerId:null===(t=l.value)||void 0===t?void 0:t.id,oppositePlayerId:null===(n=o.value)||void 0===n?void 0:n.id,voteType:e}),f.value?a.value=!0:b())})),h=t=>m(void 0,void 0,void 0,(function*(){return yield e.dispatch("gameCreate/voteForPlayer",t)})),f=(0,i.Fl)((()=>u.value===x.value.length)),y=(0,i.Fl)((()=>u.value+1===x.value.length)),b=()=>{y.value?(l.value=x.value[u.value],o.value=x.value[0]):(l.value=x.value[u.value],o.value=x.value[u.value+1]),u.value=u.value+1},k=(0,i.Fl)((()=>{var e,t,n,i;return a.value?"Ставки сделаны!":`${null!==(t=null===(e=l.value)||void 0===e?void 0:e.name)&&void 0!==t?t:""}, ответит ли ${null!==(i=null===(n=o.value)||void 0===n?void 0:n.name)&&void 0!==i?i:""} на вопрос?`})),C=()=>m(void 0,void 0,void 0,(function*(){return yield e.dispatch("questions/selectRandomCategory")}));(0,i.bv)((()=>m(void 0,void 0,void 0,(function*(){yield C(),b()}))));const w=()=>m(void 0,void 0,void 0,(function*(){yield t.push(d.Q.QUESTIONS)})),x=(0,i.Fl)((()=>e.state.gameCreate.playersList)),F=(0,i.Fl)((()=>e.state.questions.selectedCategory));return{voteCons:p,votePros:s,continueStep:n,startGameQuestions:w,isFinishedBettings:a,descriptionText:k,SelectedCategory:F}},g=(0,i.aZ)({name:"GameCreateModule",components:{ScreenSection:s.dg,BlockTitle:s.bi,BlockSubtitle:s.CH,FormButton:s.OL},setup(){const{voteCons:e,votePros:t,startGameQuestions:n,isFinishedBettings:i,descriptionText:l,SelectedCategory:o}=p();return{voteCons:e,votePros:t,startGameQuestions:n,isFinishedBettings:i,descriptionText:l,SelectedCategory:o}}});var h=n(4260);const f=(0,h.Z)(g,[["render",a]]),y=f,b=(0,i.aZ)({name:"GameBetting",components:{Screen:o.Z,GameBettingModule:y},setup(){return{}}}),k=(0,h.Z)(b,[["render",l]]),C=k}}]);