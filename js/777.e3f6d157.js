"use strict";(globalThis["webpackChunkmy_portfolio"]=globalThis["webpackChunkmy_portfolio"]||[]).push([[777],{4777:(e,t,i)=>{i.r(t),i.d(t,{default:()=>C});var n=i(3673);function o(e,t,i,o,l,u){const a=(0,n.up)("game-betting-module"),d=(0,n.up)("screen");return(0,n.wg)(),(0,n.j4)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(a)])),_:1})}var l=i(7731);const u={class:"game-betting-module"};function a(e,t,i,o,l,a){var d;const s=(0,n.up)("block-title"),v=(0,n.up)("block-subtitle"),r=(0,n.up)("screen-section"),c=(0,n.up)("form-button");return(0,n.wg)(),(0,n.iD)("div",u,[(0,n.Wm)(s,{text:`Ожидаются вопросы из категории: ${null===(d=e.SelectedCategory)||void 0===d?void 0:d.title}`},null,8,["text"]),(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n.Wm)(s,{text:"Время делать ставки"}),(0,n.Wm)(v,{text:e.descriptionText},null,8,["text"])])),_:1}),e.isFinishedBettings?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{text:"Да","click-handler":e.votePros},null,8,["click-handler"])])),_:1}),(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{text:"Нет","click-handler":e.voteCons,"is-secondary":!0},null,8,["click-handler"])])),_:1})],64)),(0,n.Wm)(r,{"is-bottom-section":!0},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{text:"Далее","click-handler":e.startGameQuestions,"is-disabled":!e.isFinishedBettings,"is-secondary":!0},null,8,["click-handler","is-disabled"])])),_:1})])}var d=i(7666),s=i(9715),v=i(8631),r=i(1959),c=i(9582),m=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,l){function u(e){try{d(n.next(e))}catch(t){l(t)}}function a(e){try{d(n["throw"](e))}catch(t){l(t)}}function d(e){e.done?i(e.value):o(e.value).then(u,a)}d((n=n.apply(e,t||[])).next())}))};const p=()=>{const e=(0,v.useStore)(),t=(0,c.tv)(),i=()=>m(void 0,void 0,void 0,(function*(){yield t.push(s.Q.GAME_BETTING)})),o=(0,r.iH)(null),l=(0,r.iH)(null),u=(0,r.iH)(0),a=(0,r.iH)(!1),d=()=>m(void 0,void 0,void 0,(function*(){yield f("Y")})),p=()=>m(void 0,void 0,void 0,(function*(){yield f("F")})),f=e=>m(void 0,void 0,void 0,(function*(){var t,i;o.value&&l.value&&(yield g({playerId:null===(t=o.value)||void 0===t?void 0:t.id,oppositePlayerId:null===(i=l.value)||void 0===i?void 0:i.id,voteType:e}),y.value?a.value=!0:b())})),g=t=>m(void 0,void 0,void 0,(function*(){return yield e.dispatch("gameCreate/voteForPlayer",t)})),y=(0,n.Fl)((()=>u.value===w.value.length)),h=(0,n.Fl)((()=>u.value+1===w.value.length)),b=()=>{h.value?(o.value=w.value[u.value],l.value=w.value[0]):(o.value=w.value[u.value],l.value=w.value[u.value+1]),u.value=u.value+1},k=(0,n.Fl)((()=>{var e,t,i,n;return a.value?"Ставки сделаны!":`${null!==(t=null===(e=o.value)||void 0===e?void 0:e.name)&&void 0!==t?t:""}, ответит ли ${null!==(n=null===(i=l.value)||void 0===i?void 0:i.name)&&void 0!==n?n:""} на вопрос?`})),C=()=>m(void 0,void 0,void 0,(function*(){return yield e.dispatch("questions/selectRandomCategory")}));(0,n.bv)((()=>m(void 0,void 0,void 0,(function*(){yield C(),b()}))));const x=()=>m(void 0,void 0,void 0,(function*(){yield t.push(s.Q.QUESTIONS)})),w=(0,n.Fl)((()=>e.state.gameCreate.playersList)),F=(0,n.Fl)((()=>e.state.questions.selectedCategory));return{voteCons:p,votePros:d,continueStep:i,startGameQuestions:x,isFinishedBettings:a,descriptionText:k,SelectedCategory:F}},f=(0,n.aZ)({name:"GameCreateModule",components:{ScreenSection:d.dg,BlockTitle:d.bi,BlockSubtitle:d.CH,FormButton:d.OL},setup(){const{voteCons:e,votePros:t,startGameQuestions:i,isFinishedBettings:n,descriptionText:o,SelectedCategory:l}=p();return{voteCons:e,votePros:t,startGameQuestions:i,isFinishedBettings:n,descriptionText:o,SelectedCategory:l}}});var g=i(4260);const y=(0,g.Z)(f,[["render",a]]),h=y,b=(0,n.aZ)({name:"GameBetting",components:{Screen:l.Z,GameBettingModule:h},setup(){return{}}}),k=(0,g.Z)(b,[["render",o]]),C=k}}]);